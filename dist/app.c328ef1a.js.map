{"version":3,"sources":["upload.js","app.js"],"names":["upload","selector","options","input","document","querySelector","preview","createElement","classList","add","open","textContent","multi","setAttribute","accept","Array","isArray","join","insertAdjacentElement","triggerInput","click","changeHandler","event","target","files","length","from","innerHTML","forEach","file","type","match","reader","FileReader","onload","src","result","insertAdjacentHTML","name","readAsDataURL","addEventListener"],"mappings":";;ACAA;;AAEA,oBAAO,OAAP,EAAgB;AACdY,EAAAA,KAAK,EAAE,IADO;AACD;AACbE,ADJK,ECILA,MAAM,CDJQd,CCIN,CAAC,IDJJ,CAAgBC,CCIb,EAAS,KDJZ,ECIG,ADJqC,ECInB,MAAlB,EAA0B,MAA1B;AAFM,ADF+B,CCE/C,KDFiCC,OAAc,uEAAJ,EAAI;AAC7C,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuBJ,QAAvB,CAAd;AACA,MAAMK,OAAO,GAAGF,QAAQ,CAACG,aAAT,CAAuB,KAAvB,CAAhB;AAEAD,EAAAA,OAAO,CAACE,SAAR,CAAkBC,GAAlB,CAAsB,SAAtB;AAEA,MAAMC,IAAI,GAAGN,QAAQ,CAACG,aAAT,CAAuB,QAAvB,CAAb;AACAG,EAAAA,IAAI,CAACF,SAAL,CAAeC,GAAf,CAAmB,KAAnB;AACAC,EAAAA,IAAI,CAACC,WAAL,GAAmB,MAAnB;;AAEA,MAAIT,OAAO,CAACU,KAAZ,EAAmB;AACjB;AACAT,IAAAA,KAAK,CAACU,YAAN,CAAmB,UAAnB,EAA+B,IAA/B;AACD;;AAED,MAAIX,OAAO,CAACY,MAAR,IAAkBC,KAAK,CAACC,OAAN,CAAcd,OAAO,CAACY,MAAtB,CAAtB,EAAqD;AACnD;AACAX,IAAAA,KAAK,CAACU,YAAN,CAAmB,QAAnB,EAA6BX,OAAO,CAACY,MAAR,CAAeG,IAAf,CAAoB,GAApB,CAA7B;AACD;;AAEDd,EAAAA,KAAK,CAACe,qBAAN,CAA4B,UAA5B,EAAwCZ,OAAxC,EApB6C,CAoBK;;AAClDH,EAAAA,KAAK,CAACe,qBAAN,CAA4B,UAA5B,EAAwCR,IAAxC,EArB6C,CAqBE;;AAE/C,MAAMS,YAAY,GAAG,SAAfA,YAAe;AAAA,WAAMhB,KAAK,CAACiB,KAAN,EAAN;AAAA,GAArB;;AAEA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAW;AAC/B,QAAIA,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAAnB,KAA8B,CAAlC,EAAqC;AACnC;AACD;;AAED,QAAMD,KAAK,GAAGT,KAAK,CAACW,IAAN,CAAWJ,KAAK,CAACC,MAAN,CAAaC,KAAxB,CAAd;AAEAlB,IAAAA,OAAO,CAACqB,SAAR,GAAoB,EAApB,CAP+B,CAOP;;AACxBH,IAAAA,KAAK,CAACI,OAAN,CAAc,UAACC,IAAD,EAAU;AACtB,UAAI,CAACA,IAAI,CAACC,IAAL,CAAUC,KAAV,CAAgB,OAAhB,CAAL,EAA+B;AAC7B;AACA;AACD;;AAED,UAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf,CANsB,CAMW;;AAEjCD,MAAAA,MAAM,CAACE,MAAP,GAAgB,UAACZ,KAAD,EAAW;AACzB,YAAMa,GAAG,GAAGb,KAAK,CAACC,MAAN,CAAaa,MAAzB,CADyB,CACQ;;AACjC9B,QAAAA,OAAO,CAAC+B,kBAAR,CACE,YADF,uHAKYF,GALZ,oBAKyBN,IAAI,CAACS,IAL9B,0BAFyB,CAUzB;AACA;AACA;AACA;AACD,OAdD;;AAgBAN,MAAAA,MAAM,CAACO,aAAP,CAAqBV,IAArB;AACD,KAzBD;AA0BD,GAlCD;;AAoCAnB,EAAAA,IAAI,CAAC8B,gBAAL,CAAsB,OAAtB,EAA+BrB,YAA/B;AACAhB,EAAAA,KAAK,CAACqC,gBAAN,CAAuB,QAAvB,EAAiCnB,aAAjC;AACD","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["export function upload(selector, options = {}) {\r\n  const input = document.querySelector(selector);\r\n  const preview = document.createElement('div');\r\n\r\n  preview.classList.add('preview');\r\n\r\n  const open = document.createElement('button');\r\n  open.classList.add('btn');\r\n  open.textContent = 'Open';\r\n\r\n  if (options.multi) {\r\n    //multi for multiple files upload at once\r\n    input.setAttribute('multiple', true);\r\n  }\r\n\r\n  if (options.accept && Array.isArray(options.accept)) {\r\n    //set selective files for upload rule('.png', '.jpeg', '.jpg', '.gif')\r\n    input.setAttribute('accept', options.accept.join(','));\r\n  }\r\n\r\n  input.insertAdjacentElement('afterend', preview); //insert preview div on img selection\r\n  input.insertAdjacentElement('afterend', open); //insert button after the default one\r\n\r\n  const triggerInput = () => input.click();\r\n\r\n  const changeHandler = (event) => {\r\n    if (event.target.files.length === 0) {\r\n      return;\r\n    }\r\n\r\n    const files = Array.from(event.target.files);\r\n\r\n    preview.innerHTML = ''; //resets list of items on upload\r\n    files.forEach((file) => {\r\n      if (!file.type.match('image')) {\r\n        //if uploading file is not an image, do not do anything, otherwise return file's name\r\n        return;\r\n      }\r\n\r\n      const reader = new FileReader(); //JS built in FileReader element(async)\r\n\r\n      reader.onload = (event) => {\r\n        const src = event.target.result; //image code\r\n        preview.insertAdjacentHTML(\r\n          'afterbegin',\r\n          `\r\n        <div class='preview-image'>\r\n        <div class='preview-remove'>&times</div>\r\n        <img src='${src}' alt='${file.name}'/>\r\n        </div>`\r\n        );\r\n        // input.insertAdjacentHTML(\r\n        //   'afterend',\r\n        //   `<img src=\"${event.target.result}\" />`\r\n        // ); //initial preview to work with\r\n      };\r\n\r\n      reader.readAsDataURL(file);\r\n    });\r\n  };\r\n\r\n  open.addEventListener('click', triggerInput);\r\n  input.addEventListener('change', changeHandler);\r\n}\r\n","import { upload } from './upload.js';\r\n\r\nupload('#file', {\r\n  multi: true, //multi for multiple files upload at once\r\n  accept: ['.png', '.jpeg', '.jpg', '.gif'],\r\n});\r\n"]}